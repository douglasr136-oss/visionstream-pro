# render.yaml - Configuração CORRIGIDA para Render.com
services:
  # BACKEND (Proxy Node.js) - Web Service
  - type: web
    name: visionstream-proxy
    runtime: node
    rootDir: server
    buildCommand: npm install
    startCommand: npm start
    envVars:
      - key: API_KEY
        generateValue: true  # Render gera chave automaticamente
      - key: NODE_ENV
        value: production
    healthCheckPath: /health
    autoDeploy: true
  
  # FRONTEND (Seu App Web) - Static Site
  - type: static
    name: visionstream-app
    rootDir: public
    buildCommand: ""  # Vazio para site estático
    publishDir: .
    autoDeploy: true
    headers:
      - path: /*
        name: Cache-Control
        value: public, max-age=3600
      - path: /assets/*
        name: Cache-Control
        value: public, max-age=86400
